{"ast":null,"code":"var _jsxFileName = \"/Users/vihanga_sathsara/Documents/GitHub/skyran/src/components/Bonds.js\",\n  _s = $RefreshSig$();\n// Bonds.js\n// Bonds.js\nimport React, { useEffect, useState } from 'react';\nimport Toggle from './GDebtComp/Toggle';\nimport Filters from './GDebtComp/Filters';\nimport RatesTable from './GDebtComp/RatesTable';\nimport axios from 'axios';\n\n/** --------- local fallback data --------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mockRates = {\n  't-bill': [{\n    bank: 'Bank of Ceylon',\n    rates: {\n      '91D': 7.25,\n      '182D': 7.35,\n      '364D': 7.55\n    }\n  }, {\n    bank: \"People's Bank\",\n    rates: {\n      '91D': 7.30,\n      '182D': 7.40,\n      '364D': 7.60\n    }\n  }, {\n    bank: 'Sampath Bank',\n    rates: {\n      '91D': 7.15,\n      '182D': 7.25,\n      '364D': 7.50\n    }\n  }],\n  't-bond': [{\n    bank: 'Bank of Ceylon',\n    rates: {\n      '2Y': 9.15,\n      '5Y': 9.75,\n      '10Y': 10.25\n    }\n  }, {\n    bank: \"People's Bank\",\n    rates: {\n      '2Y': 9.20,\n      '5Y': 9.80,\n      '10Y': 10.30\n    }\n  }, {\n    bank: 'Sampath Bank',\n    rates: {\n      '2Y': 9.05,\n      '5Y': 9.60,\n      '10Y': 10.10\n    }\n  }]\n};\n/** --------------------------------------- */\n\nexport default function Bonds() {\n  _s();\n  const [type, setType] = useState('t-bill');\n  const [data, setData] = useState([]);\n  const [sortOrder, setSortOrder] = useState('asc');\n  const [bankFilter, setBankFilter] = useState('');\n\n  /** hit backend → if it fails, inject mock data */\n  useEffect(() => {\n    let cancelled = false;\n    (async () => {\n      try {\n        const res = await axios.get(`/api/rates?t=${type}`);\n        if (!cancelled) setData(res.data);\n      } catch (err) {\n        var _err$response;\n        console.warn(`Backend unavailable (${(err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) || 'network'}); using mock data.`);\n        if (!cancelled) setData(mockRates[type]);\n      }\n    })();\n    return () => {\n      cancelled = true;\n    };\n  }, [type]);\n\n  /** helpers */\n  const avgRate = rates => Object.values(rates).reduce((a, b) => a + b, 0) / Object.keys(rates).length;\n  const filteredData = data.filter(item => item.bank.toLowerCase().includes(bankFilter.toLowerCase())).sort((a, b) => {\n    const aAvg = avgRate(a.rates);\n    const bAvg = avgRate(b.rates);\n    return sortOrder === 'asc' ? aAvg - bAvg : bAvg - aAvg;\n  });\n\n  /** UI */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 text-gray-800 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"text-center mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl font-bold font-sans text-transparent bg-clip-text bg-gradient-to-t from-[#181E23] via-[#18426c] to-[#10cfc8] leading-[1.3] pb-4\",\n          children: \"Bonds\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Toggle, {\n        type: type,\n        setType: setType\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Filters, {\n        sortOrder: sortOrder,\n        setSortOrder: setSortOrder,\n        bankFilter: bankFilter,\n        setBankFilter: setBankFilter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RatesTable, {\n        data: filteredData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(Bonds, \"J3bkXglGjBIctN2NSdhxn24yqAo=\");\n_c = Bonds;\nvar _c;\n$RefreshReg$(_c, \"Bonds\");","map":{"version":3,"names":["React","useEffect","useState","Toggle","Filters","RatesTable","axios","jsxDEV","_jsxDEV","mockRates","bank","rates","Bonds","_s","type","setType","data","setData","sortOrder","setSortOrder","bankFilter","setBankFilter","cancelled","res","get","err","_err$response","console","warn","response","status","avgRate","Object","values","reduce","a","b","keys","length","filteredData","filter","item","toLowerCase","includes","sort","aAvg","bAvg","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/vihanga_sathsara/Documents/GitHub/skyran/src/components/Bonds.js"],"sourcesContent":["// Bonds.js\n// Bonds.js\nimport React, { useEffect, useState } from 'react';\nimport Toggle   from './GDebtComp/Toggle';\nimport Filters  from './GDebtComp/Filters';\nimport RatesTable from './GDebtComp/RatesTable';\nimport axios from 'axios';\n\n/** --------- local fallback data --------- */\nconst mockRates = {\n  't-bill': [\n    { bank: 'Bank of Ceylon',  rates: { '91D': 7.25,  '182D': 7.35,  '364D': 7.55 } },\n    { bank: \"People's Bank\",   rates: { '91D': 7.30,  '182D': 7.40,  '364D': 7.60 } },\n    { bank: 'Sampath Bank',    rates: { '91D': 7.15,  '182D': 7.25,  '364D': 7.50 } },\n  ],\n  't-bond': [\n    { bank: 'Bank of Ceylon',  rates: { '2Y': 9.15, '5Y': 9.75, '10Y': 10.25 } },\n    { bank: \"People's Bank\",   rates: { '2Y': 9.20, '5Y': 9.80, '10Y': 10.30 } },\n    { bank: 'Sampath Bank',    rates: { '2Y': 9.05, '5Y': 9.60, '10Y': 10.10 } },\n  ],\n};\n/** --------------------------------------- */\n\nexport default function Bonds() {\n  const [type, setType]             = useState('t-bill');\n  const [data, setData]             = useState([]);\n  const [sortOrder, setSortOrder]   = useState('asc');\n  const [bankFilter, setBankFilter] = useState('');\n\n  /** hit backend → if it fails, inject mock data */\n  useEffect(() => {\n    let cancelled = false;\n\n    (async () => {\n      try {\n        const res = await axios.get(`/api/rates?t=${type}`);\n        if (!cancelled) setData(res.data);\n      } catch (err) {\n        console.warn(`Backend unavailable (${err?.response?.status || 'network'}); using mock data.`);\n        if (!cancelled) setData(mockRates[type]);\n      }\n    })();\n\n    return () => { cancelled = true; };\n  }, [type]);\n\n  /** helpers */\n  const avgRate = (rates) =>\n    Object.values(rates).reduce((a, b) => a + b, 0) / Object.keys(rates).length;\n\n  const filteredData = data\n    .filter((item) =>\n      item.bank.toLowerCase().includes(bankFilter.toLowerCase())\n    )\n    .sort((a, b) => {\n      const aAvg = avgRate(a.rates);\n      const bAvg = avgRate(b.rates);\n      return sortOrder === 'asc' ? aAvg - bAvg : bAvg - aAvg;\n    });\n\n  /** UI */\n  return (\n    <div className=\"min-h-screen bg-gray-100 text-gray-800 p-4\">\n      <div className=\"max-w-7xl mx-auto p-6\">\n        <header className=\"text-center mb-6\">\n          <h1 className=\"text-4xl font-bold font-sans text-transparent bg-clip-text bg-gradient-to-t from-[#181E23] via-[#18426c] to-[#10cfc8] leading-[1.3] pb-4\">\n            Bonds\n          </h1>\n        </header>\n\n        <Toggle  type={type}  setType={setType} />\n\n        <Filters\n          sortOrder={sortOrder} setSortOrder={setSortOrder}\n          bankFilter={bankFilter} setBankFilter={setBankFilter}\n        />\n\n        <RatesTable data={filteredData} />\n      </div>\n    </div>\n  );\n}\n\n\n"],"mappings":";;AAAA;AACA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,MAAM,MAAQ,oBAAoB;AACzC,OAAOC,OAAO,MAAO,qBAAqB;AAC1C,OAAOC,UAAU,MAAM,wBAAwB;AAC/C,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,SAAS,GAAG;EAChB,QAAQ,EAAE,CACR;IAAEC,IAAI,EAAE,gBAAgB;IAAGC,KAAK,EAAE;MAAE,KAAK,EAAE,IAAI;MAAG,MAAM,EAAE,IAAI;MAAG,MAAM,EAAE;IAAK;EAAE,CAAC,EACjF;IAAED,IAAI,EAAE,eAAe;IAAIC,KAAK,EAAE;MAAE,KAAK,EAAE,IAAI;MAAG,MAAM,EAAE,IAAI;MAAG,MAAM,EAAE;IAAK;EAAE,CAAC,EACjF;IAAED,IAAI,EAAE,cAAc;IAAKC,KAAK,EAAE;MAAE,KAAK,EAAE,IAAI;MAAG,MAAM,EAAE,IAAI;MAAG,MAAM,EAAE;IAAK;EAAE,CAAC,CAClF;EACD,QAAQ,EAAE,CACR;IAAED,IAAI,EAAE,gBAAgB;IAAGC,KAAK,EAAE;MAAE,IAAI,EAAE,IAAI;MAAE,IAAI,EAAE,IAAI;MAAE,KAAK,EAAE;IAAM;EAAE,CAAC,EAC5E;IAAED,IAAI,EAAE,eAAe;IAAIC,KAAK,EAAE;MAAE,IAAI,EAAE,IAAI;MAAE,IAAI,EAAE,IAAI;MAAE,KAAK,EAAE;IAAM;EAAE,CAAC,EAC5E;IAAED,IAAI,EAAE,cAAc;IAAKC,KAAK,EAAE;MAAE,IAAI,EAAE,IAAI;MAAE,IAAI,EAAE,IAAI;MAAE,KAAK,EAAE;IAAM;EAAE,CAAC;AAEhF,CAAC;AACD;;AAEA,eAAe,SAASC,KAAKA,CAAA,EAAG;EAAAC,EAAA;EAC9B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAeb,QAAQ,CAAC,QAAQ,CAAC;EACtD,MAAM,CAACc,IAAI,EAAEC,OAAO,CAAC,GAAef,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACgB,SAAS,EAAEC,YAAY,CAAC,GAAKjB,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACkB,UAAU,EAAEC,aAAa,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;;EAEhD;EACAD,SAAS,CAAC,MAAM;IACd,IAAIqB,SAAS,GAAG,KAAK;IAErB,CAAC,YAAY;MACX,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,gBAAgBV,IAAI,EAAE,CAAC;QACnD,IAAI,CAACQ,SAAS,EAAEL,OAAO,CAACM,GAAG,CAACP,IAAI,CAAC;MACnC,CAAC,CAAC,OAAOS,GAAG,EAAE;QAAA,IAAAC,aAAA;QACZC,OAAO,CAACC,IAAI,CAAC,wBAAwB,CAAAH,GAAG,aAAHA,GAAG,wBAAAC,aAAA,GAAHD,GAAG,CAAEI,QAAQ,cAAAH,aAAA,uBAAbA,aAAA,CAAeI,MAAM,KAAI,SAAS,qBAAqB,CAAC;QAC7F,IAAI,CAACR,SAAS,EAAEL,OAAO,CAACR,SAAS,CAACK,IAAI,CAAC,CAAC;MAC1C;IACF,CAAC,EAAE,CAAC;IAEJ,OAAO,MAAM;MAAEQ,SAAS,GAAG,IAAI;IAAE,CAAC;EACpC,CAAC,EAAE,CAACR,IAAI,CAAC,CAAC;;EAEV;EACA,MAAMiB,OAAO,GAAIpB,KAAK,IACpBqB,MAAM,CAACC,MAAM,CAACtB,KAAK,CAAC,CAACuB,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,EAAE,CAAC,CAAC,GAAGJ,MAAM,CAACK,IAAI,CAAC1B,KAAK,CAAC,CAAC2B,MAAM;EAE7E,MAAMC,YAAY,GAAGvB,IAAI,CACtBwB,MAAM,CAAEC,IAAI,IACXA,IAAI,CAAC/B,IAAI,CAACgC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACvB,UAAU,CAACsB,WAAW,CAAC,CAAC,CAC3D,CAAC,CACAE,IAAI,CAAC,CAACT,CAAC,EAAEC,CAAC,KAAK;IACd,MAAMS,IAAI,GAAGd,OAAO,CAACI,CAAC,CAACxB,KAAK,CAAC;IAC7B,MAAMmC,IAAI,GAAGf,OAAO,CAACK,CAAC,CAACzB,KAAK,CAAC;IAC7B,OAAOO,SAAS,KAAK,KAAK,GAAG2B,IAAI,GAAGC,IAAI,GAAGA,IAAI,GAAGD,IAAI;EACxD,CAAC,CAAC;;EAEJ;EACA,oBACErC,OAAA;IAAKuC,SAAS,EAAC,4CAA4C;IAAAC,QAAA,eACzDxC,OAAA;MAAKuC,SAAS,EAAC,uBAAuB;MAAAC,QAAA,gBACpCxC,OAAA;QAAQuC,SAAS,EAAC,kBAAkB;QAAAC,QAAA,eAClCxC,OAAA;UAAIuC,SAAS,EAAC,0IAA0I;UAAAC,QAAA,EAAC;QAEzJ;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAET5C,OAAA,CAACL,MAAM;QAAEW,IAAI,EAAEA,IAAK;QAAEC,OAAO,EAAEA;MAAQ;QAAAkC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAE1C5C,OAAA,CAACJ,OAAO;QACNc,SAAS,EAAEA,SAAU;QAACC,YAAY,EAAEA,YAAa;QACjDC,UAAU,EAAEA,UAAW;QAACC,aAAa,EAAEA;MAAc;QAAA4B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtD,CAAC,eAEF5C,OAAA,CAACH,UAAU;QAACW,IAAI,EAAEuB;MAAa;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/B;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACvC,EAAA,CA1DuBD,KAAK;AAAAyC,EAAA,GAALzC,KAAK;AAAA,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}